<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Боец</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: Arial, sans-serif;
    }

    .card {
      background-color: #1a1a1a;
      border: 1px solid red;
    }

    .bg-dark {
      background-color: #1a1a1a !important;
    }

    img {
      border-radius: 10px;
      max-width: 100%;
      height: auto;
      border: 1px solid #cc0000;
    }

    p, h4 {
      color: #fff;
    }

    .text-danger {
      color: #ff4d4d !important;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <div class="row align-items-center mb-4">
      <div class="col-md-4 text-center mb-3 mb-md-0">
        <img id="fighter-photo" src="" alt="Фото бойца" class="img-fluid shadow">
      </div>
      <div class="col-md-8">
        <h1 id="fighter-name" class="fw-bold mb-3"></h1>
        <div class="bg-dark p-3 rounded border border-danger">
          <p id="fighter-info" class="mb-0"></p>
        </div>
      </div>
    </div>

    <div class="card p-4">
      <h4 class="text-white">Бои:</h4>
      <ul id="matches-list" class="list-unstyled mt-3"></ul>
    </div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const fighterId = params.get('id');

    fetch(`/api/fighters/${fighterId}/matches`)
      .then(res => res.json())
      .then(data => {
        const { fighter, matches } = data;

        document.getElementById('fighter-name').textContent = fighter.name;
        document.getElementById('fighter-photo').src = fighter.photo_url;

        document.getElementById('fighter-info').innerHTML = `
          <strong>Страна:</strong> ${fighter.country}<br>
          <strong>Возраст:</strong> ${fighter.age}<br>
          <strong>Категория:</strong> ${fighter.category}<br>
          <strong>Стиль:</strong> ${fighter.style}<br>
          <strong>Рост:</strong> ${fighter.height}м<br>
          <strong>Вес:</strong> ${fighter.weight}кг
        `;

        const list = document.getElementById('matches-list');
        matches.forEach(match => {
          const li = document.createElement('li');
          li.classList.add('mb-2');
          li.innerHTML = `
            <strong>${match.date.slice(0, 10)}</strong> — <em>${match.opponent_name}</em><br>
            <span class="text-danger">${match.result}</span> (${match.method}) 
            на <u>${match.event_name}</u>
          `;
          list.appendChild(li);
        });
      })
      .catch(err => {
        console.error('Ошибка:', err);
        alert('Ошибка при загрузке данных');
      });
      
  </script>
</body>
</html>
